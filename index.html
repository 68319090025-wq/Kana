<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Light Firebase</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        :root { --primary: #4a90e2; --success: #2ecc71; --danger: #e74c3c; --bg: #f4f7f6; }
        body { font-family: 'Kanit', sans-serif; background: var(--bg); display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .card { background: white; width: 90%; max-width: 380px; padding: 30px; border-radius: 25px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); text-align: center; }
        .val { font-size: 40px; font-weight: 600; color: var(--primary); margin: 10px 0; }
        .status-pill { display: inline-block; padding: 5px 15px; border-radius: 20px; font-size: 14px; margin-bottom: 20px; }
        .status-on { background: #e8f5e9; color: var(--success); }
        .status-off { background: #ffebee; color: var(--danger); }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px; }
        button { padding: 15px; border: none; border-radius: 15px; cursor: pointer; font-family: 'Kanit'; font-weight: 600; transition: 0.2s; }
        .btn-blue { background: var(--primary); color: white; grid-column: span 2; }
        .btn-green { background: var(--success); color: white; }
        .btn-red { background: var(--danger); color: white; }
        button:active { transform: scale(0.95); }
    </style>
</head>
<body>

<div class="card">
    <h2>üí° Smart Lighting</h2>
    <div class="status-pill" id="modeBox">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
    
    <div style="color: #888;">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ß‡πà‡∏≤‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</div>
    <div class="val" id="lightVal">0</div>

    <div id="ledIndicator" class="status-pill status-off">LED: ‡∏õ‡∏¥‡∏î</div>

    <div class="grid">
        <button class="btn-green" onclick="setLED(true)">‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü</button>
        <button class="btn-red" onclick="setLED(false)">‡∏õ‡∏¥‡∏î‡πÑ‡∏ü</button>
        <button class="btn-blue" onclick="setAuto(true)">‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</button>
    </div>
</div>

<script>
    // --- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Firebase ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà ---
    const firebaseConfig = {
        databaseURL: "https://kana-a6e97-default-rtdb.firebaseio.com/"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Realtime
    db.ref("SmartLight").on("value", (snapshot) => {
        const data = snapshot.val();
        document.getElementById("lightVal").innerText = data.lightValue;
        
        const modeBox = document.getElementById("modeBox");
        modeBox.innerText = data.autoMode ? "‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥" : "‡πÇ‡∏´‡∏°‡∏î‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏°‡∏∑‡∏≠";
        modeBox.style.background = data.autoMode ? "#e3f2fd" : "#f5f5f5";

        const ledInd = document.getElementById("ledIndicator");
        ledInd.innerText = data.ledStatus ? "LED: ‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà" : "LED: ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà";
        ledInd.className = data.ledStatus ? "status-pill status-on" : "status-pill status-off";
    });

    function setLED(status) {
        db.ref("SmartLight").update({ ledStatus: status, autoMode: false });
    }

    function setAuto(status) {
        db.ref("SmartLight").update({ autoMode: status });
    }
</script>
</body>
</html>
